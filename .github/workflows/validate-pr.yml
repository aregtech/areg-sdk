name: PR Validation

on:
  pull_request:
    types: [opened, edited, reopened, synchronize]

jobs:
  pr-check:
    runs-on: ubuntu-latest
    steps:
      - name: Verify PR Checklist
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const prBody = context.payload.pull_request.body || '';
            const errors = [];

            if (!prBody.includes('Signed-off-by:')) {
              errors.push('Missing "Signed-off-by:" line in PR.');
            }
            if (!prBody.includes('[x] I have read CONTRIBUTING.md')) {
              errors.push('Please check the box confirming you have read CONTRIBUTING.md.');
            }
            if (!prBody.includes('[x] Code follows the project\'s style and guidelines')) {
              errors.push('Please check the box confirming code follows project style and guidelines.');
            }

            if (errors.length > 0) {
              core.setFailed(errors.join('\n'));
            }
